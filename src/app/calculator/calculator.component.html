<div class="calculator" [ngClass]="bgControl | getBgClass | async">
  <div class="bg-image"></div>
  <div>
    <h2>{{ 'appTitle' | _ }}</h2>
    <div class="dropdown-options">
      <mat-form-field appearance="fill">
        <mat-label>{{ 'language' | _ }}</mat-label>
        <mat-select [formControl]="langControl">
          <mat-option *ngFor="let lang of langList" [value]="lang">
            {{lang}}
          </mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="fill">
        <mat-label>{{ 'background' | _ }}</mat-label>
        <mat-select [formControl]="bgControl">
          <mat-option *ngFor="let bg of (backgroundList$ | async)" [value]="bg.code">
            {{ bg.description }}
          </mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <a href="https://discord.gg/ghFPrvAnXt" target="_blank">{{ 'discordInviteTitle' | _ }}</a>
    <span class="actions">
      <span>{{ 'allyLineToggle' | _ }}</span><input type="checkbox" [(ngModel)]="showAllyLinesChecked" (change)="calculateEvents()">
      <span>{{ 'enemyLineToggle' | _ }}</span><input type="checkbox" [(ngModel)]="showEnemyLinesChecked" (change)="calculateEvents()">
    </span>
    <div class="field">
      <app-field
        [doClears]="true"
        [matrix]="matrix | subMatrix : 'good'"
      ></app-field>
      <img [src]="separatorImgSrc">
      <app-field
        [matrix]="matrix | subMatrix : 'bad'"
      ></app-field>
    </div>
  </div>
  <div class="attack-order">
    <h3>{{ 'orderTitle' | _ }}</h3>
    <div class="attackOrder" *ngIf="events && events.length">
      <ol>
        <li *ngFor="let event of events">{{ event }}</li>
      </ol>
    </div>
  </div>
  <div class="unitSettings">
    <h3>{{ 'partiesTitle' | _ }}</h3>
    <div class="user-hint">{{ 'partyHint' | _ }}</div>
    <div><span>{{ 'teamRememberCheckBox' | _ }}</span><input type="checkbox" [(ngModel)]="rememberMyTeam" (change)="rememberMyTeamChecked()"></div>
    <a (click)="resetGoodParty()">{{ 'myTeamReset' | _ }}</a>
    <app-party
      [party]="goodParty"
      title="{{ 'allyTeam' | _ }}"
    ></app-party>
    <a (click)="resetEvilParty()">{{ 'enemyTeamReset' | _ }}</a>
    <app-party
      [party]="evilParty"
      title="{{ 'enemyTeam' | _ }}"
    ></app-party>
    <!-- Also move clear button next to the party, instead of clearing the whole thing -->
  </div>
  <div class="footer"><a class="help-me-link" href="https://ko-fi.com/wwworm" target="_blank">{{ 'supportLink' | _ }}</a></div>
</div>
